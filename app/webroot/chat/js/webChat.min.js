!function(o,e){"function"==typeof define&&define.amd?define(["jquery","mooBehavior","mooAlert","mooPhrase","mooAjax","mooGlobal","bloodhound"],e):"object"==typeof exports?module.exports=e(require("jquery")):o.mooDocument=e()}(this,function(o,e,i,n,s,t){var a=new Bloodhound({initialize:!1,local:[],queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name")}),r=function(e){e.length>0&&o.each(e,function(e,i){o(".room-id-"+i.id).show(),o("#rooms-list  > .box2").css("border","1px solid #ccc")})};void 0!=window.bloodhoundRawData&&(a.clear(),a.add(window.bloodhoundRawData));var c=function(){o.getJSON(mooConfig.url.base+"/chats/unblock/"+o(this).data("id")).done(function(e){if(e.hasOwnProperty("users")&&(console.log(e.users),o("#blocking-userlist").html(""),e.users.length>0)){for(var i=0;i<e.users.length;i++){var s=e.users[i];o("#blocking-userlist").append('<div class="row"> '+s.User.name+' &nbsp; <a href="#" class="chat-unblock-action" data-id="'+s.User.id+'" style=""> '+n.__("chat_unblock")+" </a> </div>")}o(".chat-unblock-action").click(c)}})};return{initOnMessagesPage:function(){o("#rooms-list > #filters >  input").keyup(function(){var e=o(this).val();""!=e?(o("#rooms-list  .rooms-item").hide(),o("#rooms-list  > .box2").css("border","none"),a.search(e,r.bind(this),r.bind(this))):o("#rooms-list  .rooms-item").show()}),o(".rooms-item").click(function(){window.location.href=o(this).data("url")})},initOnBlockingPage:function(){o(".chat-unblock-action").show(),o(".chat-unblock-action").click(c)},markAllMessagesAsRead:function(){o(".btn_mark_all_read").click(function(){window.markAllMessagesAsReadHook(o(this).data("user_id"))})}}});