(function(a,c){"function"===typeof define&&define.amd?define(["jquery","mooPhrase","mooAlert"],c):"object"===typeof exports?module.exports=c(require("jquery")):a.mooSmsVerify=c()})(this,function(a,c,e){var d=0;return{init:function(){a("body").on("validateUser",function(a,c){})},initSend:function(){d=0;a("#smsVerifyButton").click(function(){a("#sms_error").hide();d?""!=a("#sms_phone_code").val().trim()&&a.ajax({type:"POST",dataType:"json",url:mooConfig.url.base+"/sms_verifys/check",data:{code:a("#sms_phone_code").val()},
        success:function(b){b.status?mooConfig.isApp?(a("#sms_content").hide(),a("#sms_content_message").show()):location.reload():(a("#sms_error").show(),a("#sms_error").html(b.message))}}):""!=a("#sms_phone_number").val().trim()&&a.ajax({type:"POST",dataType:"json",url:mooConfig.url.base+"/sms_verifys/send",data:{phone:a("#sms_phone_number").val(),"g-recaptcha-response":a("#g-recaptcha-response").val()},success:function(b){b.status?(a("#sms_phone_number").hide(),a("#sms_wrap_phone_number").hide(),a("#sms_phone_code").show(),
            a("#sms_wrap_phone_code").show(),d=1,a("#recaptcha_content").hide()):(a("#sms_error").show(),a("#sms_error").html(b.message),"object"==typeof grecaptcha&&grecaptcha.reset())}})})},initCheck:function(){a("#checkButton").unbind("click");a("#checkButton").click(function(){""!=a("#sms_phone_code").val().trim()&&a.ajax({type:"POST",dataType:"json",url:mooConfig.url.base+"/sms_verifys/check",data:{code:a("#sms_phone_code").val()},success:function(b){b.status?mooConfig.isApp?(a("#sms_content").hide(),a("#sms_content_message").show()):
            (a("#themeModal").modal("hide"),e.alert(c.__("you_has_been_verified_with_sms"))):(a("#sms_error").show(),a("#sms_error").html(b.message))}})})}}});