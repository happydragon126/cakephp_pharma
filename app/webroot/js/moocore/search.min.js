(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","mooResponsive","mooPhrase","spinner"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.mooSearch=b()}}}(this,function(d,a,g){var f=function f(h){d("#filter-"+h).trigger("click")};var e=function(){d("#global-search-filters li").unbind("click");d("#global-search-filters li").click(function(){var h=d(this).find("a");if(h.hasClass("no-ajax")){return true}h.spin("tiny");d("#global-search-filters .current").removeClass("current");h.parent().addClass("current");switch(h.attr("id")){case"filter-blogs":case"filter-groups":case"filter-topics":d("#search-content").html('<ul class="list6 comment_wrapper" id="list-content">'+g.__("loading")+"</ul>");break;case"filter-albums":case"filter-videos":d("#search-content").html('<ul class="list4 albums" id="list-content">'+g.__("loading")+"</ul>");break;case"filter-users":d("#search-content").html('<ul class="list1 users_list" id="list-content">'+g.__("loading")+"</ul>");break;default:d("#search-content").html('<ul class="list6 comment_wrapper" id="list-content">'+g.__("loading")+"</ul>")}var k=h;var i=h.hasClass("json-view");var j=h.data();d("#center").load(encodeURI(j.url),{noCache:1},function(l){k.spin(false);a.init();d("body").trigger("afterAjaxSearchGlobalSearchCallback",[])});return false});b()};var c=function(j){var i=d.parseJSON(j);e();var h=i.tabs;if(h!=""){if(d("#filter-"+h).length>0){d("#filter-"+h).spin("tiny");d("#global-search-filters .current").removeClass("current");d("#filter-"+h).parent().addClass("current");d("#center").html(g.__("loading"));d("#center").load(d("#filter-"+h).attr("data-url"),function(k){d("#filter-"+h).spin(false);a.init()})}else{window.location=i.link}}b()};var b=function(){d(".globalSearchMore").unbind("click");d(".globalSearchMore").on("click",function(){var h=d(this).data();f(h.query)})};return{initGlobalSearchMore:b,init:e,hashInit:c}}));