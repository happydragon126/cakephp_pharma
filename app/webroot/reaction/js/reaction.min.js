(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","mooUser"],b)}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.mooReaction=b(a.jQuery)}}}(this,function(d,b){var j=8;var g=function(n,l,p,o){if(d("#reaction_"+n).find(".react-btn").hasClass("react-loading")){return}var m;if(l=="photo_comment"){m="comment"}else{m=l}d("#reaction_"+n).find(".react-btn").addClass("react-loading");d.post(mooConfig.url.base+"/reactions/ajax_add/"+m+"/"+p+"/"+o,{noCache:1},function(s){try{var q=d.parseJSON(s);if(q.is_like){d("#reaction_"+n).find(".react-btn").attr({"data-reaction":q.reaction,"data-label":q.label}).html('<span class="react-active-'+q.ele_class+'"><i class="material-icons">thumb_up</i>'+q.label+"</span>");d("#reaction_"+n).find(".react-circle").removeClass("react-active");d("#reaction_"+n).find(".react-circle[data-reaction="+q.reaction+"]").addClass("react-active")}else{d("#reaction_"+n).find(".react-btn").attr({"data-reaction":q.reaction,"data-label":q.label}).html('<span class=""><i class="material-icons">thumb_up</i>'+q.label+"</span>");d("#reaction_"+n).find(".react-circle").removeClass("react-active")}if(q.like_count>0){d("#react-result-like-"+n).removeClass("react-see-hide")}else{d("#react-result-like-"+n).addClass("react-see-hide")}d("#react-result-like-"+n).find(".react-result-count").html(q.like_count);if(q.love_count>0){d("#react-result-love-"+n).removeClass("react-see-hide")}else{d("#react-result-love-"+n).addClass("react-see-hide")}d("#react-result-love-"+n).find(".react-result-count").html(q.love_count);if(q.haha_count>0){d("#react-result-haha-"+n).removeClass("react-see-hide")}else{d("#react-result-haha-"+n).addClass("react-see-hide")}d("#react-result-haha-"+n).find(".react-result-count").html(q.haha_count);if(q.wow_count>0){d("#react-result-wow-"+n).removeClass("react-see-hide")}else{d("#react-result-wow-"+n).addClass("react-see-hide")}d("#react-result-wow-"+n).find(".react-result-count").html(q.wow_count);if(q.sad_count>0){d("#react-result-sad-"+n).removeClass("react-see-hide")}else{d("#react-result-sad-"+n).addClass("react-see-hide")}d("#react-result-sad-"+n).find(".react-result-count").html(q.sad_count);if(q.angry_count>0){d("#react-result-angry-"+n).removeClass("react-see-hide")}else{d("#react-result-angry-"+n).addClass("react-see-hide")}d("#react-result-angry-"+n).find(".react-result-count").html(q.angry_count);if(q.cool_count>0){d("#react-result-cool-"+n).removeClass("react-see-hide")}else{d("#react-result-cool-"+n).addClass("react-see-hide")}d("#react-result-cool-"+n).find(".react-result-count").html(q.cool_count);if(q.confused_count>0){d("#react-result-confused-"+n).removeClass("react-see-hide")}else{d("#react-result-confused-"+n).addClass("react-see-hide")}d("#react-result-confused-"+n).find(".react-result-count").html(q.confused_count);if(q.total_count>0){d("#react-result-total-"+n).removeClass("react-see-hide")}else{d("#react-result-total-"+n).addClass("react-see-hide")}d("#react-result-total-"+n).html(q.total_count);d("#reaction_"+n).find(".react-btn").removeClass("react-loading")}catch(r){d("#reaction_"+n).find(".react-btn").removeClass("react-loading");b.validateUser()}})};var e=function(n){var l;var m;if(mooConfig.isMobile){d("#reaction_"+n).find(".react-btn").click(function(v){v.preventDefault();clearTimeout(m);var q=d(window).width();var x=d(this).parent();var p=x.offset();var u=x.outerWidth();var s=x.find(".reacts");var t=s.find(".react-circle");var w=t.outerWidth()*t.length+j;if(w>q){var r=(q-j)/t.length;t.css({width:r+"px",height:r+"px"});w=t.outerWidth()*t.length+j}var z=(w/2)-(u/2);var o=p.left-z;if(o<0&&(o+w)<=q){z=z+o-1;s.css("left","-"+z+"px")}else{if(o>=0&&(o+w)>q){z=z+((o+w)-q)+1;s.css({left:"-"+z+"px"})}else{s.css({left:"-"+z+"px"})}}var y=d(this).parent();y.addClass("react-show");y.addClass("reaction-mobile");y.find(".react-overview").show();m=setTimeout(function(){y.removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(m);var B=y.find(".reacts");var A=B.find(".react-circle");B.css({left:""});A.css({width:"",height:""})},8000)});d("#reaction_"+n).find(".react-overview").click(function(q){q.preventDefault();var o=d(this).parent();d(this).hide();o.removeClass("react-show").removeClass("reaction-mobile");var r=o.find(".reacts");var p=r.find(".react-circle");r.css({left:""});p.css({width:"",height:""})})}else{d("#reaction_"+n).mouseenter(function(){var q=d(window).width();var w=d(this);var p=w.offset();var u=w.outerWidth();var s=d(this).find(".reacts");var t=s.find(".react-circle");var v=t.outerWidth()*t.length+j;if(v>q){var r=(q-j)/t.length;t.css({width:r+"px",height:r+"px"});v=t.outerWidth()*t.length+j}var y=(v/2)-(u/2);var o=p.left-y;if(o<0&&(o+v)<=q){y=y+o-1;s.css("left","-"+y+"px")}else{if(o>=0&&(o+v)>q){y=y+((o+v)-q)+1;s.css({left:"-"+y+"px"})}else{s.css({left:"-"+y+"px"})}}var x=d(this);l=setTimeout(function(){x.addClass("react-show")},300);clearTimeout(m)});d("#reaction_"+n).mouseleave(function(){var o=d(this);m=setTimeout(function(){o.removeClass("react-show");var q=o.find(".reacts");var p=q.find(".react-circle");q.css({left:""});p.css({width:"",height:""})},500);clearTimeout(l)});d("#reaction_"+n).find(".react-btn").click(function(o){o.preventDefault();clearTimeout(m);clearTimeout(l);g(n,d(this).attr("data-type"),d(this).attr("data-id"),d(this).attr("data-reaction"))})}d("#reaction_"+n).find(".react-circle").click(function(o){o.preventDefault();d(this).parent().parent().removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(m);clearTimeout(l);g(n,d(this).data("type"),d(this).data("id"),d(this).data("reaction"))})};var k=function(n,l,p,o){if(d("#comment_reaction_"+n).find(".react-btn").hasClass("react-loading")){return}var m;if(l=="photo_comment"){m="comment"}else{m=l}d("#comment_reaction_"+n).find(".react-btn").addClass("react-loading");d.post(mooConfig.url.base+"/reactions/ajax_add/"+m+"/"+p+"/"+o,{noCache:1},function(s){try{var q=d.parseJSON(s);if(q.is_like){d("#comment_reaction_"+n).find(".react-btn").attr({"data-reaction":q.reaction,"data-label":q.label}).html('<span class="react-active-'+q.ele_class+'"><i class="material-icons">thumb_up</i>'+q.label+"</span>");d("#comment_reaction_"+n).find(".react-circle").removeClass("react-active");d("#comment_reaction_"+n).find(".react-circle[data-reaction="+q.reaction+"]").addClass("react-active")}else{d("#comment_reaction_"+n).find(".react-btn").attr({"data-reaction":q.reaction,"data-label":q.label}).html('<span class=""><i class="material-icons">thumb_up</i>'+q.label+"</span>");d("#comment_reaction_"+n).find(".react-circle").removeClass("react-active")}if(q.like_count>0){d("#comment-react-result-like-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-like-"+n).addClass("react-see-hide")}d("#comment-react-result-like-"+n).find(".react-result-count").html(q.like_count);if(q.love_count>0){d("#comment-react-result-love-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-love-"+n).addClass("react-see-hide")}d("#comment-react-result-love-"+n).find(".react-result-count").html(q.love_count);if(q.haha_count>0){d("#comment-react-result-haha-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-haha-"+n).addClass("react-see-hide")}d("#comment-react-result-haha-"+n).find(".react-result-count").html(q.haha_count);if(q.wow_count>0){d("#comment-react-result-wow-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-wow-"+n).addClass("react-see-hide")}d("#comment-react-result-wow-"+n).find(".react-result-count").html(q.wow_count);if(q.sad_count>0){d("#comment-react-result-sad-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-sad-"+n).addClass("react-see-hide")}d("#comment-react-result-sad-"+n).find(".react-result-count").html(q.sad_count);if(q.angry_count>0){d("#comment-react-result-angry-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-angry-"+n).addClass("react-see-hide")}d("#comment-react-result-angry-"+n).find(".react-result-count").html(q.angry_count);if(q.cool_count>0){d("#comment-react-result-cool-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-cool-"+n).addClass("react-see-hide")}d("#comment-react-result-cool-"+n).find(".react-result-count").html(q.cool_count);if(q.confused_count>0){d("#comment-react-result-confused-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-confused-"+n).addClass("react-see-hide")}d("#comment-react-result-confused-"+n).find(".react-result-count").html(q.confused_count);if(q.total_count>0){d("#comment-react-result-total-"+n).removeClass("react-see-hide")}else{d("#comment-react-result-total-"+n).addClass("react-see-hide")}d("#comment-react-result-total-"+n).html(q.total_count);d("#comment_reaction_"+n).find(".react-btn").removeClass("react-loading")}catch(r){d("#comment_reaction_"+n).find(".react-btn").removeClass("react-loading");b.validateUser()}})};var a=function(n){var l;var m;if(mooConfig.isMobile){d("#comment_reaction_"+n).find(".react-btn").click(function(J){J.preventDefault();clearTimeout(m);if(d(this).parents("#theaterComments").length>0){var H=d(this).parents("#theaterComments");var I=H.offset();var s=H.outerWidth();var q=d(this).parent();var x=q.offset();var C=q.outerWidth();var v=q.find(".reacts");var p=v.find(".react-circle");var B=p.outerWidth()*p.length+j;if(B>s){var r=(s-j)/p.length;p.css({width:r+"px",height:r+"px"});B=p.outerWidth()*p.length+j}var t=(B/2)-(C/2);var w=x.left-t;if(w<I.left&&(w+B)<=(I.left+s)){t=t+w-I.left-1;v.css("left","-"+t+"px")}else{if(w>=I.left&&(w+B)>(I.left+s)){t=t+((w-I.left+B)-s)+1;v.css({left:"-"+t+"px"})}else{v.css({left:"-"+t+"px"})}}}else{var K=d(window).width();var F=d(this).parent();var o=F.offset();var z=F.outerWidth();var L=F.find(".reacts");var D=L.find(".react-circle");var E=D.outerWidth()*D.length+j;if(E>K){var G=(K-j)/D.length;D.css({width:G+"px",height:G+"px"});E=D.outerWidth()*D.length+j}var A=(E/2)-(z/2);var u=o.left-A;if(u<0&&(u+E)<=K){A=A+u-1;L.css("left","-"+A+"px")}else{if(u>=0&&(u+E)>K){A=A+((u+E)-K)+1;L.css({left:"-"+A+"px"})}else{L.css({left:"-"+A+"px"})}}}var y=d(this).parent();y.addClass("react-show");y.addClass("reaction-mobile");y.find(".react-overview").show();m=setTimeout(function(){y.removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(m);var N=y.find(".reacts");var M=N.find(".react-circle");N.css({left:""});M.css({width:"",height:""})},8000)});d("#comment_reaction_"+n).find(".react-overview").click(function(q){q.preventDefault();var o=d(this).parent();d(this).hide();o.removeClass("react-show").removeClass("reaction-mobile");var r=o.find(".reacts");var p=r.find(".react-circle");r.css({left:""});p.css({width:"",height:""})})}else{d("#comment_reaction_"+n).mouseenter(function(){if(d(this).parents("#theaterComments").length>0){var H=d(this).parents("#theaterComments");var I=H.offset();var s=H.outerWidth();var q=d(this);var x=q.offset();var C=q.outerWidth();var v=d(this).find(".reacts");var p=v.find(".react-circle");var B=p.outerWidth()*p.length+j;if(B>s){var r=(s-j)/p.length;p.css({width:r+"px",height:r+"px"});B=p.outerWidth()*p.length+j}var t=(B/2)-(C/2);var w=x.left-t;if(w<I.left&&(w+B)<=(I.left+s)){t=t+w-I.left-1;v.css("left","-"+t+"px")}else{if(w>=I.left&&(w+B)>(I.left+s)){t=t+((w-I.left+B)-s)+1;v.css({left:"-"+t+"px"})}else{v.css({left:"-"+t+"px"})}}}else{var J=d(window).width();var F=d(this);var o=F.offset();var z=F.outerWidth();var K=d(this).find(".reacts");var D=K.find(".react-circle");var E=D.outerWidth()*D.length+j;if(E>J){var G=(J-j)/D.length;D.css({width:G+"px",height:G+"px"});E=D.outerWidth()*D.length+j}var A=(E/2)-(z/2);var u=o.left-A;if(u<0&&(u+E)<=J){A=A+u-1;K.css("left","-"+A+"px")}else{if(u>=0&&(u+E)>J){A=A+((u+E)-J)+1;K.css({left:"-"+A+"px"})}else{K.css({left:"-"+A+"px"})}}}var y=d(this);l=setTimeout(function(){y.addClass("react-show")},300);clearTimeout(m)});d("#comment_reaction_"+n).mouseleave(function(){var o=d(this);m=setTimeout(function(){o.removeClass("react-show");var q=o.find(".reacts");var p=q.find(".react-circle");q.css({left:""});p.css({width:"",height:""})},500);clearTimeout(l)});d("#comment_reaction_"+n).find(".react-btn").click(function(o){o.preventDefault();clearTimeout(m);clearTimeout(l);k(n,d(this).attr("data-type"),d(this).attr("data-id"),d(this).attr("data-reaction"))})}d("#comment_reaction_"+n).find(".react-circle").click(function(o){o.preventDefault();d(this).parent().parent().removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(m);clearTimeout(l);k(n,d(this).data("type"),d(this).data("id"),d(this).data("reaction"))})};var i=function(m,l,o,n){if(d("#item_reaction_"+m).find(".react-btn").hasClass("react-loading")){return}d("#item_reaction_"+m).find(".react-btn").addClass("react-loading");d.post(mooConfig.url.base+"/reactions/ajax_add/"+l+"/"+o+"/"+n,{noCache:1},function(r){try{var p=d.parseJSON(r);if(p.is_like){d("#item_reaction_"+m).find(".react-btn").attr({"data-reaction":p.reaction,"data-label":p.label}).html('<span class="react-active-'+p.ele_class+'"><i class="material-icons">thumb_up</i>'+p.label+"</span>");d("#item_reaction_"+m).find(".react-circle").removeClass("react-active");d("#item_reaction_"+m).find(".react-circle[data-reaction="+p.reaction+"]").addClass("react-active")}else{d("#item_reaction_"+m).find(".react-btn").attr({"data-reaction":p.reaction,"data-label":p.label}).html('<span class=""><i class="material-icons">thumb_up</i>'+p.label+"</span>");d("#item_reaction_"+m).find(".react-circle").removeClass("react-active")}if(p.like_count>0){d("#item-react-result-like-"+m).removeClass("react-see-hide")}else{d("#item-react-result-like-"+m).addClass("react-see-hide")}d("#item-react-result-like-"+m).find(".react-result-count").html(p.like_count);if(p.love_count>0){d("#item-react-result-love-"+m).removeClass("react-see-hide")}else{d("#item-react-result-love-"+m).addClass("react-see-hide")}d("#item-react-result-love-"+m).find(".react-result-count").html(p.love_count);if(p.haha_count>0){d("#item-react-result-haha-"+m).removeClass("react-see-hide")}else{d("#item-react-result-haha-"+m).addClass("react-see-hide")}d("#item-react-result-haha-"+m).find(".react-result-count").html(p.haha_count);if(p.wow_count>0){d("#item-react-result-wow-"+m).removeClass("react-see-hide")}else{d("#item-react-result-wow-"+m).addClass("react-see-hide")}d("#item-react-result-wow-"+m).find(".react-result-count").html(p.wow_count);if(p.sad_count>0){d("#item-react-result-sad-"+m).removeClass("react-see-hide")}else{d("#item-react-result-sad-"+m).addClass("react-see-hide")}d("#item-react-result-sad-"+m).find(".react-result-count").html(p.sad_count);if(p.angry_count>0){d("#item-react-result-angry-"+m).removeClass("react-see-hide")}else{d("#item-react-result-angry-"+m).addClass("react-see-hide")}d("#item-react-result-angry-"+m).find(".react-result-count").html(p.angry_count);if(p.cool_count>0){d("#item-react-result-cool-"+m).removeClass("react-see-hide")}else{d("#item-react-result-cool-"+m).addClass("react-see-hide")}d("#item-react-result-cool-"+m).find(".react-result-count").html(p.cool_count);if(p.confused_count>0){d("#item-react-result-confused-"+m).removeClass("react-see-hide")}else{d("#item-react-result-confused-"+m).addClass("react-see-hide")}d("#item-react-result-confused-"+m).find(".react-result-count").html(p.confused_count);if(p.total_count>0){d("#item-react-result-total-"+m).removeClass("react-see-hide")}else{d("#item-react-result-total-"+m).addClass("react-see-hide")}d("#item-react-result-total-"+m).html(p.total_count);d("#item_reaction_"+m).find(".react-btn").removeClass("react-loading")}catch(q){d("#item_reaction_"+m).find(".react-btn").removeClass("react-loading");b.validateUser()}})};var f=function(m){var l;var n;if(mooConfig.isMobile){d("#item_reaction_"+m).find(".react-btn").click(function(v){v.preventDefault();clearTimeout(n);var q=d(window).width();var x=d(this).parent();var p=x.offset();var u=x.outerWidth();var s=x.find(".reacts");var t=s.find(".react-circle");var w=t.outerWidth()*t.length+j;if(w>q){var r=(q-j)/t.length;t.css({width:r+"px",height:r+"px"});w=t.outerWidth()*t.length+j}var z=(w/2)-(u/2);var o=p.left-z;if(o<0&&(o+w)<=q){z=z+o-1;s.css("left","-"+z+"px")}else{if(o>=0&&(o+w)>q){z=z+((o+w)-q)+1;s.css({left:"-"+z+"px"})}else{s.css({left:"-"+z+"px"})}}var y=d(this).parent();y.addClass("react-show");y.addClass("reaction-mobile");y.find(".react-overview").show();n=setTimeout(function(){y.removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(n);var B=y.find(".reacts");var A=B.find(".react-circle");B.css({left:""});A.css({width:"",height:""})},8000)});d("#item_reaction_"+m).find(".react-overview").click(function(q){q.preventDefault();var o=d(this).parent();d(this).hide();o.removeClass("react-show").removeClass("reaction-mobile");var r=o.find(".reacts");var p=r.find(".react-circle");r.css({left:""});p.css({width:"",height:""})})}else{d("#item_reaction_"+m).mouseenter(function(){var q=d(window).width();var w=d(this);var p=w.offset();var u=w.outerWidth();var s=d(this).find(".reacts");var t=s.find(".react-circle");var v=t.outerWidth()*t.length+j;if(v>q){var r=(q-j)/t.length;t.css({width:r+"px",height:r+"px"});v=t.outerWidth()*t.length+j}var y=(v/2)-(u/2);var o=p.left-y;if(o<0&&(o+v)<=q){y=y+o-1;s.css("left","-"+y+"px")}else{if(o>=0&&(o+v)>q){y=y+((o+v)-q)+1;s.css({left:"-"+y+"px"})}else{s.css({left:"-"+y+"px"})}}var x=d(this);l=setTimeout(function(){x.addClass("react-show")},300);clearTimeout(n)});d("#item_reaction_"+m).mouseleave(function(){var o=d(this);n=setTimeout(function(){o.removeClass("react-show");var q=o.find(".reacts");var p=q.find(".react-circle");q.css({left:""});p.css({width:"",height:""})},500);clearTimeout(l)});d("#item_reaction_"+m).find(".react-btn").click(function(o){o.preventDefault();clearTimeout(n);clearTimeout(l);i(m,d(this).attr("data-type"),d(this).attr("data-id"),d(this).attr("data-reaction"))})}d("#item_reaction_"+m).find(".react-circle").click(function(o){o.preventDefault();d(this).parent().parent().removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(n);clearTimeout(l);i(m,d(this).data("type"),d(this).data("id"),d(this).data("reaction"))})};var c=function(m,l,o,n){if(d("#photo_reaction_"+m).find(".react-btn").hasClass("react-loading")){return}d("#photo_reaction_"+m).find(".react-btn").addClass("react-loading");d.post(mooConfig.url.base+"/reactions/ajax_add/"+l+"/"+o+"/"+n,{noCache:1},function(r){try{var p=d.parseJSON(r);if(p.is_like){d("#photo_reaction_"+m).find(".react-btn").attr({"data-reaction":p.reaction,"data-label":p.label}).html('<span class="react-active-'+p.ele_class+'"><i class="material-icons">thumb_up</i>'+p.label+"</span>");d("#photo_reaction_"+m).find(".react-circle").removeClass("react-active");d("#photo_reaction_"+m).find(".react-circle[data-reaction="+p.reaction+"]").addClass("react-active")}else{d("#photo_reaction_"+m).find(".react-btn").attr({"data-reaction":p.reaction,"data-label":p.label}).html('<span class=""><i class="material-icons">thumb_up</i>'+p.label+"</span>");d("#photo_reaction_"+m).find(".react-circle").removeClass("react-active")}if(p.like_count>0){d("#photo-react-result-like-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-like-"+m).addClass("react-see-hide")}d("#photo-react-result-like-"+m).find(".react-result-count").html(p.like_count);if(p.love_count>0){d("#photo-react-result-love-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-love-"+m).addClass("react-see-hide")}d("#photo-react-result-love-"+m).find(".react-result-count").html(p.love_count);if(p.haha_count>0){d("#photo-react-result-haha-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-haha-"+m).addClass("react-see-hide")}d("#photo-react-result-haha-"+m).find(".react-result-count").html(p.haha_count);if(p.wow_count>0){d("#photo-react-result-wow-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-wow-"+m).addClass("react-see-hide")}d("#photo-react-result-wow-"+m).find(".react-result-count").html(p.wow_count);if(p.sad_count>0){d("#photo-react-result-sad-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-sad-"+m).addClass("react-see-hide")}d("#photo-react-result-sad-"+m).find(".react-result-count").html(p.sad_count);if(p.angry_count>0){d("#photo-react-result-angry-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-angry-"+m).addClass("react-see-hide")}d("#photo-react-result-angry-"+m).find(".react-result-count").html(p.angry_count);if(p.cool_count>0){d("#photo-react-result-cool-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-cool-"+m).addClass("react-see-hide")}d("#photo-react-result-cool-"+m).find(".react-result-count").html(p.cool_count);if(p.confused_count>0){d("#photo-react-result-confused-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-confused-"+m).addClass("react-see-hide")}d("#photo-react-result-confused-"+m).find(".react-result-count").html(p.confused_count);if(p.total_count>0){d("#photo-react-result-total-"+m).removeClass("react-see-hide")}else{d("#photo-react-result-total-"+m).addClass("react-see-hide")}d("#photo-react-result-total-"+m).html(p.total_count);d("#photo_reaction_"+m).find(".react-btn").removeClass("react-loading")}catch(q){d("#photo_reaction_"+m).find(".react-btn").removeClass("react-loading");b.validateUser()}})};var h=function(m){var l;var n;if(mooConfig.isMobile){d("#photo_reaction_"+m).find(".react-btn").click(function(J){J.preventDefault();clearTimeout(n);if(d(this).parents(".photo_on_theater").length>0){var H=d(this).parents(".photo_left");var I=H.offset();var s=H.outerWidth();var q=d(this).parent();var x=q.offset();var C=q.outerWidth();var v=q.find(".reacts");var p=v.find(".react-circle");var B=p.outerWidth()*p.length+j;if(B>s){var r=(s-j)/p.length;p.css({width:r+"px",height:r+"px"});B=p.outerWidth()*p.length+j}var t=(B/2)-(C/2);var w=x.left-t;if(w<I.left&&(w+B)<=(I.left+s)){t=t+w-I.left-1;v.css("left","-"+t+"px")}else{if(w>=I.left&&(w+B)>(I.left+s)){t=t+((w-I.left+B)-s)+1;v.css({left:"-"+t+"px"})}else{v.css({left:"-"+t+"px"})}}}else{var K=d(window).width();var F=d(this).parent();var o=F.offset();var z=F.outerWidth();var L=F.find(".reacts");var D=L.find(".react-circle");var E=D.outerWidth()*D.length+j;if(E>K){var G=(K-j)/D.length;D.css({width:G+"px",height:G+"px"});E=D.outerWidth()*D.length+j}var A=(E/2)-(z/2);var u=o.left-A;if(u<0&&(u+E)<=K){A=A+u-1;L.css("left","-"+A+"px")}else{if(u>=0&&(u+E)>K){A=A+((u+E)-K)+1;L.css({left:"-"+A+"px"})}else{L.css({left:"-"+A+"px"})}}}var y=d(this).parent();y.addClass("react-show");y.addClass("reaction-mobile");y.find(".react-overview").show();n=setTimeout(function(){y.removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(n);var N=y.find(".reacts");var M=N.find(".react-circle");N.css({left:""});M.css({width:"",height:""})},8000)});d("#photo_reaction_"+m).find(".react-overview").click(function(q){q.preventDefault();var o=d(this).parent();d(this).hide();o.removeClass("react-show").removeClass("reaction-mobile");var r=o.find(".reacts");var p=r.find(".react-circle");r.css({left:""});p.css({width:"",height:""})})}else{d("#photo_reaction_"+m).mouseenter(function(){if(d(this).parents(".photo_on_theater").length>0){var H=d(this).parents(".photo_left");var I=H.offset();var s=H.outerWidth();var q=d(this);var x=q.offset();var C=q.outerWidth();var v=d(this).find(".reacts");var p=v.find(".react-circle");var B=p.outerWidth()*p.length+j;if(B>s){var r=(s-j)/p.length;p.css({width:r+"px",height:r+"px"});B=p.outerWidth()*p.length+j}var t=(B/2)-(C/2);var w=x.left-t;if(w<I.left&&(w+B)<=(I.left+s)){t=t+w-I.left-1;v.css("left","-"+t+"px")}else{if(w>=I.left&&(w+B)>(I.left+s)){t=t+((w-I.left+B)-s)+1;v.css({left:"-"+t+"px"})}else{v.css({left:"-"+t+"px"})}}}else{var J=d(window).width();var F=d(this);var o=F.offset();var z=F.outerWidth();var K=d(this).find(".reacts");var D=K.find(".react-circle");var E=D.outerWidth()*D.length+j;if(E>J){var G=(J-j)/D.length;D.css({width:G+"px",height:G+"px"});E=D.outerWidth()*D.length+j}var A=(E/2)-(z/2);var u=o.left-A;if(u<0&&(u+E)<=J){A=A+u-1;K.css("left","-"+A+"px")}else{if(u>=0&&(u+E)>J){A=A+((u+E)-J)+1;K.css({left:"-"+A+"px"})}else{K.css({left:"-"+A+"px"})}}}var y=d(this);l=setTimeout(function(){y.addClass("react-show")},300);clearTimeout(n)});d("#photo_reaction_"+m).mouseleave(function(){var o=d(this);n=setTimeout(function(){o.removeClass("react-show");var q=o.find(".reacts");var p=q.find(".react-circle");q.css({left:""});p.css({width:"",height:""})},500);clearTimeout(l)});d("#photo_reaction_"+m).find(".react-btn").click(function(o){o.preventDefault();clearTimeout(n);clearTimeout(l);c(m,d(this).attr("data-type"),d(this).attr("data-id"),d(this).attr("data-reaction"))})}d("#photo_reaction_"+m).find(".react-circle").click(function(o){o.preventDefault();d(this).parent().parent().removeClass("react-show").removeClass("reaction-mobile").find(".react-overview").hide();clearTimeout(n);clearTimeout(l);c(m,d(this).data("type"),d(this).data("id"),d(this).data("reaction"))})};return{initActivityReaction:function(l){e(l)},initCommentReaction:function(l){a(l)},initItemReaction:function(l){f(l)},initPhotoReaction:function(l){h(l)}}}));