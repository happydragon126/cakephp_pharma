(function(a,e){"function"===typeof define&&define.amd?define("jquery mooFileUploader mooAlert mooPhrase mooGlobal mooButton".split(" "),e):"object"===typeof exports?module.exports=e(require("jquery")):a.mooVerifyProfile=e()})(this,function(a,e,u,b,v,h){var l=function(){a("#requestVerification").unbind("click");a("#requestVerification").click(function(){a.post(mooConfig.url.base+"/profile/verify/ajax_request_verification",{noCache:1},function(){window.location.href=mooConfig.url.base+"/profile/verify/success_verification?app_no_tab=1"})});
a("#reverifyVerification").unbind("click");a("#reverifyVerification").click(function(){a.post(mooConfig.url.base+"/profile/verify/ajax_reverification",{noCache:1},function(){window.location.reload()})});a("#verifyVerification").unbind("click");a("#verifyVerification").click(function(){var b=a(this).data();a.post(mooConfig.url.base+"/profile/verify/ajax_verify",{id:b.id,noCache:1},function(){window.location.href=mooConfig.url.base+"/profile/verify/success_verify/"+b.id+" ?app_no_tab=1"})});a("#denyVerification").unbind("click");
a("#denyVerification").click(function(){var b=a(this).data();a("#themeModal .modal-content").html("");a("#themeModal .modal-content").spin("small");a("#themeModal .modal-content").load(mooConfig.url.base+"/profile/verify/ajax_unverify/"+b.id,function(){a("#themeModal .modal-content").spin(!1);a("#themeModal").modal("show")})})},m=function(){a("#verifyByAdmin").unbind("click");a("#verifyByAdmin").click(function(){var d=a(this).data();a.fn.SimpleModal({callback:function(){a.post(mooConfig.url.base+
"/profile/verify/ajax_verify",{id:d.id},function(){window.location.reload()})},btn_ok:b.__("confirm"),btn_cancel:b.__("cancel"),title:b.__("verify_by_admin"),contents:b.__("are_you_sure_verify_this_profile"),model:"confirm"}).showModal()});a("#reverifyProfile").unbind("click");a("#reverifyProfile").click(function(){a.fn.SimpleModal({callback:function(){a.post(mooConfig.url.base+"/profile/verify/ajax_reverification",{noCache:1},function(){window.location.reload()})},btn_ok:b.__("confirm"),btn_cancel:b.__("cancel"),
title:b.__("verification_pending"),contents:b.__("are_you_sure_cancel_and_verify_again"),model:"confirm"}).showModal()});a("#requestVerification").unbind("click");a("#requestVerification").click(function(){a.fn.SimpleModal({callback:function(){a.post(mooConfig.url.base+"/profile/verify/ajax_request_verification",{noCache:1},function(){window.location.reload()})},btn_ok:b.__("confirm"),btn_cancel:b.__("cancel"),title:b.__("request_verification"),contents:b.__("are_you_sure_request_verification"),model:"confirm"}).showModal()});
a("#requestPending").unbind("click");a("#requestPending").click(function(){var d=a(this).data();a.fn.SimpleModal({callback:function(){a.post(mooConfig.url.base+"/profile/verify/ajax_verify",{id:d.id},function(){window.location.reload()})},title:b.__("verification_pending"),contents:b.__("are_you_sure_verify_this_profile"),model:"content",onAppend:function(){var c=this,g=a("<a>").attr({title:b.__("verify"),"class":"btn btn-action"}).click(function(){c.options.callback();c.hideModal()}).text(b.__("verify")),
f=a("<a>").attr({"data-backdrop":"true","data-dismiss":"","data-toggle":"modal","data-target":"#themeModal",href:mooConfig.url.base+"/profile/verify/ajax_unverify/"+d.id,title:b.__("deny"),"class":"btn btn-action"}).click(function(){c.hideModal()}).text(b.__("deny")),k=a("<a>").attr({title:b.__("cancel"),"class":"button button-action"}).click(function(){c.hideModal()}).text(b.__("cancel"));a("#simple-modal").find(".simple-modal-footer").append(g).append(f).append(k)}}).showModal()})},n=function(){var d=
"btn btn-action",c=b.__("edit_these_verified_information");mooConfig.isApp&&(c='<div class="mooApp_pv_simple-modal-body">'+b.__("edit_these_verified_information")+"</div>",d="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-button--colored");a.fn.SimpleModal({title:b.__("please_confirm"),contents:c,model:"content",onAppend:function(){var c=this,f=a("<a>").attr({title:b.__("confirm"),"class":d}).click(function(){c.hideModal()}).text(b.__("confirm"));a("#simple-modal").find(".simple-modal-footer").append(f)}}).showModal()},
p=function(){a("#loadAjaxAvatar").unbind("click");a("#loadAjaxAvatar").click(function(){a("#themeModal .modal-content").html("");a("#themeModal .modal-content").spin("small");a("#themeModal .modal-content").load(mooConfig.url.base+"/profile/verify/ajax_avatar",function(){a("#themeModal .modal-content").spin(!1);a("#themeModal").modal("show")})})},q=function(){a("#otherReason").unbind("click");a("#otherReason").click(function(){!0===this.checked?a("#otherReasonContent").show():a("#otherReasonContent").hide()});
a("#unverifyAction").unbind("click");a("#unverifyAction").click(function(){var b=a(this).data().id;a("#unverifyAction").spin("small");h.disableButton("unverifyAction");a.post(mooConfig.url.base+"/profile/verify/ajax_unverify_process",a("#unverifyForm").serialize(),function(c){h.enableButton("unverifyAction");a("#unverifyAction").spin(!1);c=a.parseJSON(c);1===c.result?mooConfig.isApp?window.location.href=mooConfig.url.base+"/profile/verify/deny_verification/"+b+" ?app_no_tab=1":window.location.reload():
(a(".error-message").show(),a(".error-message").html(c.message))});return!1})},t=function(d){var c=[],g=new e.fineUploader({element:a("#photos_upload")[0],autoUpload:!1,text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i>'+b.__("drag_or_click_here_to_upload_photo")+"</div>"},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},request:{endpoint:mooConfig.url.base+"/profile/verify/ajax_upload"},callbacks:{onComplete:function(b,d,r){c.push(r.photo);
a("#new_photos").val(c.join(","));a("#nextStep").show()},onSubmit:function(c,k){"undefined"===typeof this.iItemCount&&(this.iShowMessage=this.iItemCount=0);this.iItemCount++;if(0<d&&d<this.iItemCount){this.iItemCount--;if(0===this.iShowMessage){this.iShowMessage=1;var f="btn btn-action",e=b.__("the_number_documents_for_verification_request");mooConfig.isApp&&(e='<div class="mooApp_pv_simple-modal-body">'+b.__("the_number_documents_for_verification_request")+"</div>",f="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-button--colored");
a.fn.SimpleModal({title:b.__("please_confirm"),contents:e,model:"content",onAppend:function(){var c=this,d=a("<a>").attr({title:b.__("confirm"),"class":f}).click(function(){c.hideModal()}).text(b.__("confirm"));a("#simple-modal").find(".simple-modal-footer").append(d)}}).showModal()}return!1}},onCancel:function(a,b){"undefined"!==typeof this.iItemCount&&this.iItemCount--}}});a("#triggerUpload").unbind("click");a("#triggerUpload").click(function(){if("undefined"!==typeof g.iItemCount&&g.iItemCount===
d)g.uploadStoredFiles();else{var c="btn btn-action",e=b.__("the_number_documents_for_verification_request");mooConfig.isApp&&(e='<div class="mooApp_pv_simple-modal-body">'+b.__("the_number_documents_for_verification_request")+"</div>",c="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--raised mdl-button--colored");a.fn.SimpleModal({title:b.__("please_confirm"),contents:e,model:"content",onAppend:function(){var d=this,e=a("<a>").attr({title:b.__("confirm"),"class":c}).click(function(){d.hideModal()}).text(b.__("confirm"));
a("#simple-modal").find(".simple-modal-footer").append(e)}}).showModal();return!1}});a("#nextStep").unbind("click");a("#nextStep").click(function(){h.disableButton("nextStep");a("#nextStep").spin("small");a("#uploadPhotoForm").submit()})};return{initAppMemberProfile:function(){l()},initMemberProfile:function(){m()},initEditProfile:function(){n()},initAjaxAvatar:function(){p()},initAjaxUnverify:function(){q()},initVerifyProfile:function(a){t(a)}}});